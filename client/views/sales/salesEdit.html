<template name="SalesEdit">
  <h2>Edit Sales:</h2>

  {{> quickForm collection="Sales" doc=this id="saleForm" type="update" fields="customer, date" autosave=true}}

  <form class="add-item">
    <h4>Add an item:</h4>
    <select name="product" class="product-select">
      {{#each productOptions}}
        <option value="{{value}}">{{label}}</option>
      {{/each}}
    </select>
    <input type="number" name="eachPrice" id="eachPrice" placeholder="Each price?" />
    <input type="number" name="quantity" placeholder="How many?" value=1 />
    <input type="submit" value="Add Item">
  </form>

  {{> saleLines}}
</template>

<template name="saleLines">
  <table class="table table-striped">
    <thead>
      <th>Product</th>
      <th>Quantity</th>
      <th>Unit Price</th>
      <th>Total Price</th>
      <th>Tax</th>
    </thead>
    <tbody>
      {{#each items}}
      <tr>
      <td>{{productName product}}</td>
      <td>{{quantity}}</td>
      <td>{{eachPrice}}</td>
      <td>{{extendedPrice}}</td>
      <td>{{taxAmount}}</td>
      <td><a class="delete-item" name="{{../_id}}">{{product}}</a></td>
      </tr>
      {{/each}}
    </tbody>
  </table>
</template>
